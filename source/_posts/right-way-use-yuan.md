title: 使用羊角符号￥的正确姿势
date: 2017-05-09 23:00:00
categories: 技术
tags: [Android]
description: ￥￥￥￥￥￥￥￥￥￥￥￥
---

最近写 UI 的时候遇到个蛮有意思的问题，事情是这样的：我要用 TextView 展示一段标识价格的文字，如「￥23333」，这件事本来完全不会往心里去，随手就这么写了：

```java
mTvPrice.setText("￥23333");
```

有毛病吗？没毛病，IDE 里面也显示的好好的：

![](http://ojanerta1.bkt.clouddn.com/2017-05-09-WX20170509-230333-2x.png "IDE 显示")

但是到了手机上就成这个屌样子了：

![](http://ojanerta1.bkt.clouddn.com/2017-05-09-Screenshot_2017-05-09-23-43-23-869_com.sankuai.me.png "奇怪的￥符")

看到没，双横线的人民币符号变成了单横线的人民币符号，喵喵喵？心态有些崩……

![](http://ojanerta1.bkt.clouddn.com/2017-05-09-WX20170509-235737-2x.png "喵喵喵")

不过，喵归喵，问题既然出现了那就一定得想办法解决嗯……那么现在有这么几个问题需要查一下：

1. 单横线的人民币符号和双横线人民币符号哪个是受官方承认的？
2. 为什么在 App 上有的地方是双横线，有的地方又是单横线？
3. 我应该怎么安全的写出正确的双横线人民币符号？

第一个问题，双横线的人民币符号是受官方承认的，wiki 里人民币的定义：

> 人民币在 ISO 4217 简称为 CNY（“CN” 一般用于表示中华人民共和国；“Y” 即拼音 Yuan 的首字母，是 “Chinese Yuan” 的缩写），离岸人民币简称为 CNH，不过更常用的缩写是 RMB（Ren Min Bi）；在数字前一般加上 “¥”（取 “YUAN” 的首字母 “Y”，上面加一个 “=” 号）表示人民币的金额。

所以，双横线的确是人民币官方符号，那么这是否代表着单横线的人民币符号有问题呢？非也，在翻阅一些资~~(zhi)~~料~~(hu)~~之后，笔者发现，单横线的羊角符号其实是一种「习惯性用法」，在国家对人民币符号做标准化之前，这两种符号因字体间差异而处于相当大程度的混用中，在很长一段时间内，各大电商网站在做人民币符号标识时都存在差异。而在国家进行标准化之后，双横线的羊角符号被推荐替代单横线的羊角符号使用。

OK，暂时线松了一口气，线上的单横线羊角符号暂时还不会导致~~华哥被开除~~，那么就是接下来的问题：为什么在 App 中有的时候是单横线有的时候是双横线？

这个问题在搞懂上面的问题之后就很简单了，单横线其实是全角的双横线羊角符在不同的字体下的一个形式变体——简单地说，这就是个全角的羊角符，而这个全角羊角符在手机系统中只显示一根横线。至于使用羊角符号时，是应该使用全角羊角符还是半角羊角符，知乎里面也有比较清楚地讨论：

> 因为人民币符号多是与半角阿拉伯数字相邻使用而非在汉字文本流中独自出现，所以建议通常使用其半角版本，以保证货币符号与数字的空间关系及字体设计协调。
> 
> 全角人民币符号「￥」只是个历史遗留字符，如今通常不会用到，它和半角人民币符号「¥」也没有语义差异。
话说到这里，必须插一句，网上有一些意见认为，单横线的羊角符号是日元符号，其实这里是个误解，wiki 里日元的定义：

> 日圆（日语：円〔圓〕／えん〔ゑん〕，日语罗马字：Yen[1](#)），亦简作日元，全称为日本圆，货币符号为 ¥，国际标准化组织 ISO 4217 的货币代码为 JPY，是日本的官方货币。其发行制造机构为日本银行，纸币称为日本银行券。

看到没，人民币和日元如果仅论符号，两种货币符号都是￥，他们的区分是通过羊角符之前的拉丁字母区分：CN￥/ JP￥。

所以，为了纠正 App 里面有碍观瞻的单横线羊角符号就很简单了，全局搜索全角羊角符，替换为半角羊角符即可。

OK，上面两个问题解决之后，基本整件事就很清楚了——开发者错误的使用了全角羊角符，导致在手机上某些机型的字体显示为了单横线的羊角符。那么如何去避免这件事呢？笔者大致总结了一些方案：

1. Mac 下的搜狗输入法在中文输入环境下通过「Shift+4」会输入全角羊角符「￥」，而在英文输入场景下通过「Shift+4」会输入半角美元符「$」所以直接用快捷键输入是不会得到正确结果的。不过如果你用搜狗输入法的话，可以尝试在中文输入环境下键入「rmb」，输入法会自动提示给你正确的半角羊角符「¥」。
2. 保存一份正确的羊角符，一个生十个，十个生百个……
3. 定义静态的 StringFormat，把金额当参数输入，输出正确的金额 String

OK 本文到这里就差不多了，罗里吧嗦的写了不少，全当记录一件蛮有意思的事了嗯